<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8'>
<meta content='Huihoo Code' name='description'>
<title>
Allen / build-web-application-with-golang | 
GitLab
</title>
<link href="/assets/Huihoo-code-03-ae6bdd87808b10397cafae03bfd1e051.png" rel="shortcut icon" type="image/vnd.microsoft.icon" />
<link href="/assets/application-bd00f1e0c41e14d30a6945c77b6b5c94.css" media="all" rel="stylesheet" />
<link href="/assets/print-1df3ea9b8ff148a6745321899e0cb213.css" media="print" rel="stylesheet" />
<script src="/assets/application-c8cd2dd87cbf8a023b21baf4d6996ac9.js"></script>
<meta content="authenticity_token" name="csrf-param" />
<meta content="X4XDGaP4HTqL/MTUo3SEX+5dvoGREbjdXI39uSzcGBI=" name="csrf-token" />
<script type="text/javascript">
//<![CDATA[
window.gon={};gon.default_issues_tracker="gitlab";gon.api_version="v3";gon.relative_url_root="";gon.default_avatar_url="http://code.huihoo.com/assets/no_avatar-adffbfe10d45b20495cd2a9b88974150.png";
//]]>
</script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">




</head>

<!-- Piwik -->
<script>
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u=(("https:" == document.location.protocol) ? "https" : "http") + "://tongji.huihoo.com/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 16]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';
    g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript>
<p>
<img alt='' src='http://tongji.huihoo.com/piwik.php?idsite=16' style='border:0;'>
</p>
</noscript>
<!-- End Piwik Code -->

<body class='ui_mars application' data-page='projects:blob:show'>

<header class='navbar navbar-static-top navbar-gitlab'>
<div class='navbar-inner'>
<div class='container'>
<div class='app_logo'>
<span class='separator'></span>
<a class="home" href="/public"><h1>GITLAB</h1>
</a><span class='separator'></span>
</div>
<h1 class='title'><span><a href="/u/longhui">Allen</a> / build-web-application-with-golang</span></h1>
<button class='navbar-toggle' data-target='.navbar-collapse' data-toggle='collapse' type='button'>
<span class='sr-only'>Toggle navigation</span>
<i class='icon-reorder'></i>
</button>
<div class='pull-right hidden-xs'>
<a class="btn btn-sign-in btn-new" href="/users/sign_in?redirect_to_referer=yes">Sign in</a>
</div>
<div class='navbar-collapse collapse'>
<ul class='nav navbar-nav'>
<li class='visible-xs'>
<a href="/users/sign_in?redirect_to_referer=yes">Sign in</a>
</li>
</ul>
</div>
</div>
</div>
</header>

<nav class='main-nav navbar-collapse collapse'>
<div class='container'><ul>
<li class="home"><a href="/longhui/build-web-application-with-golang" title="Project">Activity
</a></li><li class="active"><a href="/longhui/build-web-application-with-golang/tree/10505097d01370b03671f1491e9224906fa3d5a3">Files</a>
</li><li class=""><a href="/longhui/build-web-application-with-golang/commits/10505097d01370b03671f1491e9224906fa3d5a3">Commits</a>
</li><li class=""><a href="/longhui/build-web-application-with-golang/network/10505097d01370b03671f1491e9224906fa3d5a3">Network</a>
</li><li class=""><a href="/longhui/build-web-application-with-golang/graphs/10505097d01370b03671f1491e9224906fa3d5a3">Graphs</a>
</li><li class=""><a href="/longhui/build-web-application-with-golang/issues">Issues
<span class='count issue_counter'>1</span>
</a></li><li class=""><a href="/longhui/build-web-application-with-golang/merge_requests">Merge Requests
<span class='count merge_counter'>0</span>
</a></li><li class=""><a href="/longhui/build-web-application-with-golang/wikis/home">Wiki</a>
</li></ul>
</div>
</nav>
<div class='container'>
<div class='content'><div class='tree-ref-holder'>
<form accept-charset="UTF-8" action="/longhui/build-web-application-with-golang/refs/switch" class="project-refs-form" method="get"><div style="display:none"><input name="utf8" type="hidden" value="&#x2713;" /></div>
<select class="project-refs-select select2 select2-sm" id="ref" name="ref"><optgroup label="Branches"><option value="master">master</option></optgroup><optgroup label="Tags"></optgroup><optgroup label="Commit"><option selected="selected" value="10505097d01370b03671f1491e9224906fa3d5a3">10505097d01370b03671f1491e9224906fa3d5a3</option></optgroup></select>
<input id="destination" name="destination" type="hidden" value="blob" />
<input id="path" name="path" type="hidden" value="ebook/build.sh" />
</form>


</div>
<div class='tree-holder' id='tree-holder'>
<ul class='breadcrumb repo-breadcrumb'>
<li>
<i class='icon-angle-right'></i>
<a href="/longhui/build-web-application-with-golang/tree/10505097d01370b03671f1491e9224906fa3d5a3">build-web-application-with-golang
</a></li>
<li>
<a href="/longhui/build-web-application-with-golang/tree/10505097d01370b03671f1491e9224906fa3d5a3/ebook">ebook</a>
</li>
<li>
<a href="/longhui/build-web-application-with-golang/blob/10505097d01370b03671f1491e9224906fa3d5a3/ebook/build.sh"><strong>
build.sh
</strong>
</a></li>
</ul>
<ul class='blob-commit-info bs-callout bs-callout-info hidden-xs'>
<li class='commit js-toggle-container'>
<div class='commit-row-title'>
<a class="commit_short_id" href="/longhui/build-web-application-with-golang/commit/b7a7cee0ec9eed1d29f55601cf8a689f7df29166">b7a7cee0e</a>
&nbsp;
<span class='str-truncated'>
<a class="commit-row-message" href="/longhui/build-web-application-with-golang/commit/b7a7cee0ec9eed1d29f55601cf8a689f7df29166">Update build.sh</a>
</span>
<a class="pull-right" href="/longhui/build-web-application-with-golang/tree/b7a7cee0ec9eed1d29f55601cf8a689f7df29166">Browse Code &gt;&gt;</a>
<div class='notes_count'>
</div>
</div>
<div class='commit-row-info'>
<a class="commit-author-link has_tooltip" data-original-title="zhibinr@gmail.com" href="mailto:zhibinr@gmail.com"><img alt="" class="avatar s16" src="http://www.gravatar.com/avatar/5c997a72db13546a1792b7363767a48d?s=16&amp;d=identicon" width="16" /> <span class="commit-author-name">zhibinr</span></a>
<div class='committed_ago'>
<time class='time_ago' data-placement='top' data-toggle='tooltip' datetime='2014-03-07T08:42:01Z' title='Mar 07, 2014 4:42pm'>2014-03-07 16:42:01 +0800</time>
<script>$('.time_ago').timeago().tooltip()</script>
 &nbsp;
</div>
</div>
</li>

</ul>
<div class='tree-content-holder' id='tree-content-holder'>
<article class='file-holder'>
<div class='file-title clearfix'>
<i class='icon-file'></i>
<span class='file_name'>
build.sh
<small>1.49 KB</small>
</span>
<span class='options hidden-xs'><div class='btn-group tree-btn-group'>
<span class='btn btn-small disabled'>edit</span>
<a class="btn btn-small" href="/longhui/build-web-application-with-golang/raw/10505097d01370b03671f1491e9224906fa3d5a3/ebook/build.sh" target="_blank">raw</a>
<a class="btn btn-small" href="/longhui/build-web-application-with-golang/blame/10505097d01370b03671f1491e9224906fa3d5a3/ebook/build.sh">blame</a>
<a class="btn btn-small" href="/longhui/build-web-application-with-golang/commits/10505097d01370b03671f1491e9224906fa3d5a3/ebook/build.sh">history</a>
</div>
</span>
</div>
<div class='file-content code'>
<div class='highlighted-data white'>
<div class='line-numbers'>
<a href="#L1" id="L1" rel="#L1"><i class='icon-link'></i>
1
</a><a href="#L2" id="L2" rel="#L2"><i class='icon-link'></i>
2
</a><a href="#L3" id="L3" rel="#L3"><i class='icon-link'></i>
3
</a><a href="#L4" id="L4" rel="#L4"><i class='icon-link'></i>
4
</a><a href="#L5" id="L5" rel="#L5"><i class='icon-link'></i>
5
</a><a href="#L6" id="L6" rel="#L6"><i class='icon-link'></i>
6
</a><a href="#L7" id="L7" rel="#L7"><i class='icon-link'></i>
7
</a><a href="#L8" id="L8" rel="#L8"><i class='icon-link'></i>
8
</a><a href="#L9" id="L9" rel="#L9"><i class='icon-link'></i>
9
</a><a href="#L10" id="L10" rel="#L10"><i class='icon-link'></i>
10
</a><a href="#L11" id="L11" rel="#L11"><i class='icon-link'></i>
11
</a><a href="#L12" id="L12" rel="#L12"><i class='icon-link'></i>
12
</a><a href="#L13" id="L13" rel="#L13"><i class='icon-link'></i>
13
</a><a href="#L14" id="L14" rel="#L14"><i class='icon-link'></i>
14
</a><a href="#L15" id="L15" rel="#L15"><i class='icon-link'></i>
15
</a><a href="#L16" id="L16" rel="#L16"><i class='icon-link'></i>
16
</a><a href="#L17" id="L17" rel="#L17"><i class='icon-link'></i>
17
</a><a href="#L18" id="L18" rel="#L18"><i class='icon-link'></i>
18
</a><a href="#L19" id="L19" rel="#L19"><i class='icon-link'></i>
19
</a><a href="#L20" id="L20" rel="#L20"><i class='icon-link'></i>
20
</a><a href="#L21" id="L21" rel="#L21"><i class='icon-link'></i>
21
</a><a href="#L22" id="L22" rel="#L22"><i class='icon-link'></i>
22
</a><a href="#L23" id="L23" rel="#L23"><i class='icon-link'></i>
23
</a><a href="#L24" id="L24" rel="#L24"><i class='icon-link'></i>
24
</a><a href="#L25" id="L25" rel="#L25"><i class='icon-link'></i>
25
</a><a href="#L26" id="L26" rel="#L26"><i class='icon-link'></i>
26
</a><a href="#L27" id="L27" rel="#L27"><i class='icon-link'></i>
27
</a><a href="#L28" id="L28" rel="#L28"><i class='icon-link'></i>
28
</a><a href="#L29" id="L29" rel="#L29"><i class='icon-link'></i>
29
</a><a href="#L30" id="L30" rel="#L30"><i class='icon-link'></i>
30
</a><a href="#L31" id="L31" rel="#L31"><i class='icon-link'></i>
31
</a><a href="#L32" id="L32" rel="#L32"><i class='icon-link'></i>
32
</a><a href="#L33" id="L33" rel="#L33"><i class='icon-link'></i>
33
</a><a href="#L34" id="L34" rel="#L34"><i class='icon-link'></i>
34
</a><a href="#L35" id="L35" rel="#L35"><i class='icon-link'></i>
35
</a><a href="#L36" id="L36" rel="#L36"><i class='icon-link'></i>
36
</a><a href="#L37" id="L37" rel="#L37"><i class='icon-link'></i>
37
</a><a href="#L38" id="L38" rel="#L38"><i class='icon-link'></i>
38
</a><a href="#L39" id="L39" rel="#L39"><i class='icon-link'></i>
39
</a><a href="#L40" id="L40" rel="#L40"><i class='icon-link'></i>
40
</a><a href="#L41" id="L41" rel="#L41"><i class='icon-link'></i>
41
</a><a href="#L42" id="L42" rel="#L42"><i class='icon-link'></i>
42
</a><a href="#L43" id="L43" rel="#L43"><i class='icon-link'></i>
43
</a><a href="#L44" id="L44" rel="#L44"><i class='icon-link'></i>
44
</a><a href="#L45" id="L45" rel="#L45"><i class='icon-link'></i>
45
</a><a href="#L46" id="L46" rel="#L46"><i class='icon-link'></i>
46
</a><a href="#L47" id="L47" rel="#L47"><i class='icon-link'></i>
47
</a><a href="#L48" id="L48" rel="#L48"><i class='icon-link'></i>
48
</a><a href="#L49" id="L49" rel="#L49"><i class='icon-link'></i>
49
</a><a href="#L50" id="L50" rel="#L50"><i class='icon-link'></i>
50
</a><a href="#L51" id="L51" rel="#L51"><i class='icon-link'></i>
51
</a><a href="#L52" id="L52" rel="#L52"><i class='icon-link'></i>
52
</a><a href="#L53" id="L53" rel="#L53"><i class='icon-link'></i>
53
</a><a href="#L54" id="L54" rel="#L54"><i class='icon-link'></i>
54
</a><a href="#L55" id="L55" rel="#L55"><i class='icon-link'></i>
55
</a><a href="#L56" id="L56" rel="#L56"><i class='icon-link'></i>
56
</a></div>
<div class='highlight'>
<pre><code class='language-sh'>#!/bin/sh

SED='sed'

if [ `uname -s` == 'Darwin' ] ; then
  SED='gsed'
fi

bn=&quot;`basename $0`&quot;
WORKDIR=&quot;$(cd $(dirname $0); pwd -P)&quot;

#
# Default language: zh
# You can overwrite following variables in config file.
#
MSG_INSTALL_PANDOC_FIRST='请先安装pandoc，然后再次运行'
MSG_SUCCESSFULLY_GENERATED='build-web-application-with-golang.epub 已经建立'
MSG_CREATOR='Astaxie'
MSG_DESCRIPTION='一本开源的Go Web编程书籍'
MSG_LANGUAGE='zh-CN'
MSG_TITLE='Go Web编程'
[ -e &quot;$WORKDIR/config&quot; ] &amp;&amp; . &quot;$WORKDIR/config&quot;


TMP=`mktemp -d 2&gt;/dev/null || mktemp -d -t &quot;${bn}&quot;` || exit 1
trap 'rm -rf &quot;$TMP&quot;' 0 1 2 3 15


cd &quot;$TMP&quot;

(
[ go list github.com/fairlyblank/md2min &gt;/dev/null 2&gt;&amp;1 ] || export GOPATH=&quot;$PWD&quot;
go get -u github.com/fairlyblank/md2min
WORKDIR=&quot;$WORKDIR&quot; TMP=&quot;$TMP&quot; go run &quot;$WORKDIR/build.go&quot;
)

if [ ! type -P pandoc &gt;/dev/null 2&gt;&amp;1 ]; then
	echo &quot;$MSG_INSTALL_PANDOC_FIRST&quot;
	exit 0
fi

cat &lt;&lt;__METADATA__ &gt; metadata.txt
&lt;dc:creator&gt;$MSG_CREATOR&lt;/dc:creator&gt;
&lt;dc:description&gt;$MSG_DESCRIPTION&lt;/dc:description&gt;
&lt;dc:language&gt;$MSG_LANGUAGE&lt;/dc:language&gt;
&lt;dc:rights&gt;Creative Commons&lt;/dc:rights&gt;
&lt;dc:title&gt;$MSG_TITLE&lt;/dc:title&gt;
__METADATA__

mkdir -p $TMP/images
cp -r $WORKDIR/images/* $TMP/images/
ls [0-9]*.html | xargs $SED -i &quot;s/png?raw=true/png/g&quot;

pandoc --reference-links -S --toc -f html -t epub --epub-metadata=metadata.txt --epub-cover-image=&quot;$WORKDIR/images/cover.png&quot; -o &quot;$WORKDIR/../build-web-application-with-golang.epub&quot; `ls [0-9]*.html | sort`

echo &quot;$MSG_SUCCESSFULLY_GENERATED&quot;</code></pre>
</div>
</div>

</div>

</article>
</div>

</div>
</div>
</div>
</body>
</html>

